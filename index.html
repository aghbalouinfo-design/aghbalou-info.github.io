<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cours d'Informatique | Hub P√©dagogique</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- Nouvelle Palette : D√©grad√©s Turquoise/Bleu --- */
        :root {
            /* Couleurs de base (Th√®me Principal) */
            --theme-start: #1abc9c; /* Turquoise/Teal clair */
            --theme-end: #148f77;   /* Teal fonc√© pour le d√©grad√© principal */
            --accent-color: #3498db; /* Bleu Vif pour les liens/ic√¥nes */
            
            /* Couleurs Primaires */
            --text-dark: #34495e; /* Gris Ardoise (Calme) pour le corps de texte */
            --bg-light: #f9fbfd; /* Fond tr√®s pale (presque blanc cass√©) pour la clart√© */
            
            /* Couleurs de Statut et d'Accentuation */
            --status-encours: #2ecc71; /* Vert √âmeraude (Succ√®s/Progression) */
            --status-termine: #9b59b6; /* Am√©thyste (Fini/R√©alis√©) */
            --danger-color: #e74c3c; /* Rouge Pomegranate (Alerte/Urgent) */
            
            /* UI Elements */
            --card-bg: #FFFFFF;
            --header-bg-light: #ecf0ff; /* Fond de carte en-t√™te tr√®s l√©ger (l√©ger bleut√©) */
            --border-color: #dfe6e9; /* Bordure tr√®s l√©g√®re et douce */
            --font-main: 'Nunito', sans-serif;
            
            /* D√©grad√©s */
            --main-gradient: linear-gradient(135deg, var(--theme-start) 0%, var(--theme-end) 100%);
            --button-gradient: linear-gradient(135deg, var(--theme-start), var(--accent-color));
            
            /* --- Nouveaux D√©grad√©s pour les statuts de Module --- */
            --gradient-encours: linear-gradient(135deg, #2ecc71, #27ae60);      /* Vert */
            --gradient-logiciels: linear-gradient(135deg, #3498db, #2980b9);    /* Bleu Oc√©an (M02) */
            --gradient-algorithmique: linear-gradient(135deg, #9b59b6, #8e44ad); /* Violet (M03) */
            --gradient-reseaux: linear-gradient(135deg, #f39c12, #e67e22);      /* Orange Solaire (M04) */
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-light);
            color: var(--text-dark);
            margin: 70px 0 0 0; 
            line-height: 1.6;
            transition: margin-left 0.3s;
        }
        
        p, ul, ol {
            font-size: 1.05em;
        }

        /* --- Barre de Navigation --- */
        .navbar {
            background-color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            padding: 0 20px;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 1000;
        }
        .nav-logo {
            font-size: 1.5em;
            font-weight: 800;
            color: var(--theme-end); /* Couleur sombre pour le logo */
            cursor: pointer;
        }
        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }
        .nav-links li a {
            padding: 10px 15px;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 700;
            transition: color 0.2s;
            cursor: pointer;
        }
        .nav-links li a:hover, .nav-links li a.active {
            /* Utilisation d'un gradient textuel (moins support√©, mais styl√©) ou d'une couleur d'accentuation */
            color: var(--accent-color); 
        }

        /* --- Conteneur Principal & Titres --- */
        .container {
            max-width: 1100px;
            margin: 50px auto;
            padding: 0 20px;
        }
        #content > main.container {
            margin-top: 50px; 
        }

        .section-title {
            text-align: center;
            font-size: 2.5em;
            font-weight: 800;
            margin-bottom: 40px;
            color: var(--text-dark);
        }
        h3 {
            font-weight: 800;
            font-size: 1.2em;
            color: var(--theme-end); /* Utilisation de la couleur sombre pour les petits titres */
        }

        /* --- Composants de Contenu (Cards, Tags, Boutons) --- */
        .modules-grid, .ressources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .module-card, .info-card {
            background-color: var(--card-bg);
            border-radius: 12px; 
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }

        .card-header {
            padding: 20px 25px;
            /* Remplac√© par un gradient pour les headers par d√©faut */
            background-image: var(--main-gradient); 
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
            color: white; /* Texte blanc par d√©faut sur les headers color√©s */
        }
        .card-header h3 { 
            margin: 0; 
            font-size: 1.4em; 
            color: white !important; /* Force le titre en blanc sur le gradient */
        }
        
        /* --- Styles d'Accentuation de la Carte (Overriding gradient) --- */
        /* M01: G√©n√©ralit√©s (En cours) -> Vert √âmeraude */
        .card-header.bg-encours { background-image: var(--gradient-encours); }
        
        /* M02: Logiciels (√Ä venir) -> Bleu Oc√©an (Nouveau) */
        .card-header.bg-logiciels { background-image: var(--gradient-logiciels); }
        
        /* M03: Algorithmique (√Ä venir) -> Violet Am√©thyste */
        .card-header.bg-algorithmique { background-image: var(--gradient-algorithmique); }
        
        /* M04: R√©seaux (√Ä venir) -> Orange Solaire (Nouveau) */
        .card-header.bg-reseaux { background-image: var(--gradient-reseaux); }
        
        /* Th√®me / Par D√©faut */
        .card-header.bg-theme { background-image: var(--main-gradient); }
        
        /* Danger / Alerte */
        .card-header.bg-danger { background-image: linear-gradient(135deg, #e74c3c, #c0392b); }


        /* Couleurs du Texte des Tags √† l'int√©rieur des Headers (fond blanc) */
        .card-header .status-tag {
            background-color: white; 
        }

        .card-header.bg-encours .status-tag { color: #2ecc71; }
        .card-header.bg-logiciels .status-tag { color: #3498db; }
        .card-header.bg-algorithmique .status-tag { color: #9b59b6; }
        .card-header.bg-reseaux .status-tag { color: #f39c12; }
        .card-header.bg-danger .status-tag { color: #e74c3c; }


        .status-tag {
            padding: 5px 12px;
            border-radius: 50px;
            font-size: 0.8em;
            font-weight: 700;
            color: white;
            white-space: nowrap;
        }
        /* Ces styles ne sont utiles que pour le corps de carte */
        .status-encours { 
            background-color: #2ecc71; 
        }
        .status-avenir { 
            /* Remplac√© par une couleur neutre si utilis√© hors header */
            background-color: #95a5a6; 
        }
        .status-termine { 
            background-color: #9b59b6; 
        }

        .card-body {
            padding: 25px;
            flex-grow: 1;
        }
        
        .card-footer {
            padding: 25px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .btn {
            display: inline-block;
            background-image: var(--button-gradient); /* Applique un gradient au bouton */
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1em;
            text-decoration: none;
            transition: transform 0.2s, box-shadow 0.2s;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2); 
        }
        .btn:hover {
            transform: scale(1.03);
            /* Augmente l'ombre pour l'effet de pression/survol */
            box-shadow: 0 6px 15px rgba(0,0,0,0.3); 
            text-decoration: none;
        }
        
        /* Styles pour les boutons sp√©cifiques (overriding le gradient par d√©faut) */
        .btn-secondary {
            background-image: none;
            background-color: var(--accent-color);
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
        }
        .btn-secondary:hover {
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.6);
        }

        /* --- Styles pour l'Accord√©on des Modules (page: modules) --- */
        .info-card .card-header {
            cursor: pointer;
            user-select: none;
        }

        .card-header .header-controls {
            display: flex;
            align-items: center;
            gap: 15px; 
        }

        .toggle-icon {
            font-size: 1.2em;
            color: white; 
            transition: transform 0.3s ease;
            width: 20px; 
            text-align: center;
        }
        
        .info-card.collapsed .card-body {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
            overflow: hidden;
            opacity: 0;
            visibility: hidden; 
        }

        .info-card .card-body {
            max-height: 2000px; 
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out, opacity 0.4s ease, visibility 0.5s;
            opacity: 1;
            visibility: visible;
        }
        
        .sequence-heading {
            color: var(--accent-color); /* Couleur primaire pour les titres de s√©quence */
            font-size: 1.3em;
            font-weight: 800;
            margin-top: 25px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid var(--header-bg-light); 
        }
        .sequence-heading:first-child {
            margin-top: 0; 
        }
        
        /* --- Composants Sp√©cifiques --- */
        .hero-banner {
            /* Gradient Vif et √©tendu pour la Banni√®re */
            background-image: linear-gradient(to right, var(--theme-start), var(--accent-color));
            color: white;
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .hero-banner h1 { margin: 0; font-size: 3em; font-weight: 800; }
        .hero-banner p { font-size: 1.4em; margin: 10px 0 0; opacity: 0.95; }

        .announcement {
            background-color: var(--danger-color);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 40px;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .announcement strong { 
            font-size: 1.1em;
            margin-right: 5px;
        }
        
        .resource-link {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background-color: var(--card-bg);
            border-radius: 10px;
            text-decoration: none;
            color: var(--text-dark);
            transition: background-color 0.2s;
            border: 1px solid var(--border-color);
            /* Utilisation du gradient comme bordure gauche */
            border-left: 5px solid var(--theme-end);
            border-image: linear-gradient(to bottom, var(--theme-start), var(--theme-end)) 1; 
        }
        .resource-link:hover {
            background-color: var(--header-bg-light);
        }
        .resource-link .icon {
            font-size: 1.5em;
            margin-right: 15px;
            color: var(--accent-color); /* Ic√¥nes en bleu vif */
            flex-shrink: 0;
        }
        
        /* Sp√©cifique pour les liens de ressources */
        .resource-link.border-success { border-image: var(--gradient-encours) 1; }
        .resource-link.border-algorithmique { border-image: var(--gradient-algorithmique) 1; }
        .resource-link.border-danger { border-image: linear-gradient(to bottom, var(--danger-color), #c0392b) 1; }

        .resource-link > div {
            flex-grow: 1;
            min-width: 0;
        }
        .resource-link h4 {
            margin: 0;
            font-size: 1.1em;
            font-weight: 700;
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .resource-link p {
            margin: 5px 0 0 0;
            font-size: 0.85em;
            color: var(--status-avenir); 
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }


        .event-item {
            /* Utilisation d'une bordure solide pour la simplicit√©, mais en couleur accentu√©e */
            border-left: 5px solid var(--accent-color);
            padding: 15px 20px;
            margin-bottom: 15px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: border-left-color 0.2s;
        }
        .event-item.urgent { border-left-color: var(--danger-color); }
        .event-item.project { border-left-color: var(--theme-end); }
        .event-date {
            width: 100px;
            text-align: center;
            font-weight: 800;
            padding-right: 20px;
            border-right: 1px solid var(--border-color);
            color: var(--accent-color);
            flex-shrink: 0;
        }
        .event-details {
            padding-left: 20px;
        }
        .event-details p { margin: 0; font-size: 0.9em; }

        .lesson-page-content {
            background-color: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            margin-top: 30px;
        }
        .lesson-page-content h3 {
            color: var(--theme-end);
            font-size: 1.8em;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 30px;
        }
        .lesson-page-content h4 {
            color: var(--accent-color);
            font-weight: 800;
            font-size: 1.4em;
            margin-top: 25px;
            margin-bottom: 10px;
        }
        .lesson-page-content ul {
            list-style: disc;
            padding-left: 20px;
            margin-bottom: 20px;
        }
        .success-criteria ul {
            list-style: none;
            padding-left: 0;
        }
        .success-criteria ul li {
            background-color: var(--header-bg-light);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-left: 5px solid var(--status-encours);
            border-radius: 5px;
            font-weight: 700;
            color: var(--text-dark);
        }
        .success-criteria ul li:before {
            content: '‚úì';
            color: var(--status-encours);
            font-weight: 900;
            margin-right: 10px;
        }

        .note-content {
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            background-color: var(--header-bg-light);
            display: none;
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }
        .note-content h5 {
            color: var(--theme-end);
            font-size: 1.2em;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 5px;
            margin-top: 15px;
        }

        #markmap-page-container {
            width: 100%;
            height: calc(100vh - 180px); 
            position: relative;
        }
        #markmap-svg {
            width: 100%;
            height: 100%;
            background-color: white;
            border-radius: 10px;
        }

        .site-footer {
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            border-top: 1px solid var(--border-color);
            color: var(--status-avenir);
            font-size: 0.9em;
        }
        
        /* Styles pour la barre d'outils Markmap */
        .markmap-toolbar {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 50; 
        }


        /* Media Queries pour le Mobile */
        @media (max-width: 768px) {
            body {
                font-size: 95%;
            }
            p, ul, ol, .card-body {
                font-size: 1em;
            }
            
            .navbar { 
                padding: 0 10px; 
                height: auto; 
                flex-direction: column;
                align-items: stretch;
            }
            .nav-logo { 
                font-size: 1.4em; 
                padding: 15px 0;
                text-align: center;
            }
            
            .nav-links { 
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 5px;
                padding-bottom: 10px;
                margin-bottom: 5px; 
            }
            .nav-links li {
                text-align: center;
            }
            .nav-links li a {
                padding: 10px 5px;
                font-size: 0.85em;
                display: block;
                border-radius: 5px;
            }
            
            body {
                margin-top: 130px;
            }

            .container { margin: 20px auto; padding: 0 10px; }
            
            .modules-grid, .ressources-grid {
                 gap: 20px;
            }
            .module-card, .info-card {
                margin-bottom: 10px;
            }
            
            .hero-banner h1 { font-size: 2em; }
            .hero-banner p { font-size: 1.2em; }
            .section-title { font-size: 1.8em; margin-bottom: 20px; }
            .lesson-page-content { padding: 20px; }
            
            #markmap-page-container { 
                height: 80vh;
            }
            
            .event-date { width: 70px; font-size: 0.8em; }
            
            .resource-link { 
                flex-direction: row; 
                align-items: flex-start;
                padding: 12px;
            }
            .resource-link p {
                white-space: normal;
            }
        }
        
    </style>
</head>
<body>

    <header class="navbar">
        <div class="nav-logo" onclick="navigateTo('accueil')">üíª InfoLyc√©e</div>
        <ul class="nav-links" id="navLinks">
            <li><a class="nav-link active" data-page="accueil">Accueil</a></li>
            <li><a class="nav-link" data-page="modules">Modules</a></li>
            <li><a class="nav-link" data-page="devoirs">Devoirs</a></li>
            <li><a class="nav-link" data-page="calendrier">Calendrier</a></li>
            <li><a class="nav-link" data-page="ressources">Ressources</a></li>
            <li><a class="nav-link" data-page="contact">Contact</a></li>
        </ul>
    </header>

    <div id="content">
        <!-- Contenu des pages charg√© ici par JavaScript -->
    </div>
    
    <footer class="site-footer">
        <p>Hub P√©dagogique - &copy; 2025 - Younes TICHOUA - Enseignant en Informatique | Compl√®xe P√®dagogique Aghbalou</p>
    </footer>

    <!-- Int√©gration de Markmap (Scripts mis √† jour pour fiabilit√© et ajout de la Toolbar) -->
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-lib@0.18.12"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12"></script>
    <script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script>

    <script>
        
        /**
         * Bascule le contenu (card-body) d'un module entre repli√© et d√©pli√©.
         * Utilise la classe 'collapsed' sur la carte parente.
         */
        function toggleModule(moduleId) {
            const card = document.getElementById(moduleId);
            if (!card) return;

            const icon = card.querySelector('.toggle-icon');

            const isCollapsed = card.classList.contains('collapsed');

            if (isCollapsed) {
                // D√©plier
                card.classList.remove('collapsed');
                icon.innerHTML = '‚ñº'; // Fl√®che vers le bas (ouvert)
            } else {
                // Replier
                card.classList.add('collapsed');
                icon.innerHTML = '‚ñ∂'; // Fl√®che vers la droite (ferm√©)
            }
        }
        
        // Fonction utilitaire pour basculer la visibilit√© du texte
        function toggleNoteContent(id) {
            const content = document.getElementById(id);
            const button = document.querySelector(`[onclick="toggleNoteContent('${id}')"]`);
            
            // NOTE: Mise √† jour des gradients des boutons pour rester coh√©rent
            const gradientShow = 'linear-gradient(135deg, var(--theme-start), var(--accent-color))'; 
            const gradientHide = 'linear-gradient(135deg, var(--status-termine), #8e44ad)'; // Gradient violet pour masquer
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                button.textContent = 'Afficher les Notes de Cours D√©taill√©es ‚ûï';
                button.style.backgroundImage = gradientShow;
            } else {
                content.style.display = 'block';
                button.textContent = 'Masquer les Notes de Cours D√©taill√©es ‚ûñ';
                button.style.backgroundImage = gradientHide;
            }
        }
        
        // --- Contenu Markdown de la Carte Mentale (Int√©gr√© en JS pour la Markmap) ---
        const mindmapMarkdownS01 = `
# üß† M01-S01-L01 : Information, Traitement et Informatique

## 1. Concepts Fondamentaux (D-I-C)
### Donn√©e (Data)
* **Mati√®re Premi√®re** : Symbole brut, non interpr√©t√© (ex: "18", "Rouge", "1011").
* **Signification** : Aucune en soi.
### Information
* **Donn√©e Trait√©e** : Structur√©e et mise en contexte.
* **Exemple** : La donn√©e "18" devient "La temp√©rature de la salle est 18¬∞C".
* **Utilit√©** : Apporte une signification.
### Connaissance
* **Utilisation de l'Information** : Capacit√© √† prendre une d√©cision.
* **Exemple** : La consigne est 22¬∞C. Si l'information est 18¬∞C, la connaissance indique qu'il faut allumer le chauffage.

## 2. Traitement de l'Information
### Cycle IPO (Input-Process-Output)
* **D√©finition** : Mod√®le de base de tout syst√®me informatique.
* **I - Entr√©e (Input)** : Acquisition des donn√©es (Capteur, Clavier, Souris).
* **P - Traitement (Process)** : Manipulation des donn√©es (Calculs, Tri, Algorithmes). R√¥le du **CPU**.
* **O - Sortie (Output)** : Restitution des r√©sultats (√âcran, Imprimante, Actionneur).

## 3. L'Informatique
### Origine du Mot
* **Contraction** : **INFORM**ation + **AUTOMAT**ique.
### D√©finition Simple
* **C'est la science du traitement rationnel et **automatique** de l'information.**
### Importance de l'Automatisme
* Permet d'ex√©cuter des t√¢ches r√©p√©titives sans intervention humaine.
        `;
        
        const mindmapMarkdownS02 = `
# ‚öôÔ∏è M01-S02-L02 : Sch√©ma Fonctionnel de l'Ordinateur

## 1. Architecture de Von Neumann
### Principe Fondateur
* **Programme et Donn√©es** : Sont stock√©s dans la m√™me m√©moire (M√©moire Centrale).
### Composants Cl√©s
* **Unit√© Centrale (CPU)** : Cerveau de la machine.
* **M√©moire Centrale (RAM/ROM)** : Stocke temporairement les programmes et les donn√©es.
* **Unit√©s d'Entr√©e/Sortie (E/S)** : P√©riph√©riques d'interaction (clavier, √©cran, disque dur).

## 2. R√¥les des Unit√©s
### Unit√© Arithm√©tique et Logique (UAL)
* **Fonction** : Effectue les calculs (+, -, *, /) et les comparaisons logiques (ET, OU, NON).
### Unit√© de Commande et de Contr√¥le (CU)
* **Fonction** : Dirige toutes les op√©rations ; s√©quence les instructions (Bus de Commandes).
### M√©moire Centrale (RAM)
* **Caract√©ristique** : Volatile (perte d'information √† l'arr√™t).
* **R√¥le** : Espace de travail du CPU.

## 3. Les BUS (Canaux de Communication)
### Bus de Donn√©es
* **R√¥le** : Transport de l'information (Donn√©es et Instructions) entre les unit√©s.
### Bus d'Adresses
* **R√¥le** : Indique l'emplacement exact (l'adresse) en m√©moire o√π le CPU veut lire ou √©crire.
### Bus de Commandes
* **R√¥le** : Transporte les signaux de contr√¥le (Lecture, √âcriture, etc.).
        `;
        
        // Stocke les mindmaps pour un acc√®s facile
        const mindmaps = {
            'S01': { title: 'M01-S01-L01 : Information, Traitement et Informatique', content: mindmapMarkdownS01 },
            'S02': { title: 'M01-S02-L02 : Sch√©ma Fonctionnel d‚Äôun Ordinateur', content: mindmapMarkdownS02 }
            // Ajoutez d'autres s√©quences ici
        };

        // √âtat pour savoir quelle mindmap charger
        let currentMindmapKey = 'S01'; 


        // --- Fonctions Markmap (MISE √Ä JOUR) ---
        function renderMarkmap(markdownContent, mapTitle) {
            // V√©rification que les objets Markmap n√©cessaires sont charg√©s
            if (typeof window.markmap === 'undefined' || !window.markmap.lib || !window.markmap.view || !window.markmap.Toolbar) {
                console.error("Markmap n'est pas compl√®tement charg√© (manque lib, view ou toolbar).");
                return;
            }

            const svgElement = document.getElementById('markmap-svg');
            const svgSelector = 'svg#markmap-svg';
            if (!svgElement) {
                console.error("√âl√©ment SVG Markmap non trouv√©.");
                return;
            }
            
            const titleElement = document.getElementById('markmapTitle');
            if (titleElement) {
                titleElement.textContent = 'üó∫Ô∏è Carte Mentale Interactive : ' + mapTitle;
            }

            try {
                // On s'assure d'avoir les classes n√©cessaires
                const { Markmap, transformer, Toolbar } = window.markmap; 
                
                // 1. Transformer le Markdown en donn√©es Markmap (root)
                const { root } = transformer.transform(markdownContent);
                
                // 2. Initialiser ou mettre √† jour Markmap
                if (!window.mm) {
                    // Cr√©er une nouvelle instance
                    window.mm = Markmap.create(svgSelector, null, root);

                    // 3. Ajouter la Toolbar une seule fois
                    const toolbarContainer = document.getElementById('markmap-page-container');
                    const toolbar = new Toolbar(window.mm);
                    const toolbarElement = toolbar.render();
                    
                    // Nettoyage de l'ancienne toolbar si elle existe (pour rechargement)
                    const oldToolbar = toolbarContainer.querySelector('.markmap-toolbar');
                    if (oldToolbar) oldToolbar.remove();
                    
                    toolbarElement.setAttribute("style", "position:absolute;bottom:20px;right:20px; z-index: 50;");
                    toolbarContainer.append(toolbarElement);

                } else {
                    // Mettre √† jour l'instance existante
                    window.mm.setData(root);
                }

                // Ajuster la vue pour centrer le contenu
                if (window.mm && window.mm.fit) {
                    window.mm.fit();
                }

            } catch (error) {
                console.error("Erreur lors du rendu de Markmap:", error);
                const container = document.getElementById('markmap-page-container');
                if (container) {
                     container.innerHTML = '<p style="text-align:center; padding: 50px; color: var(--danger-color);">Erreur : Impossible de charger la carte mentale interactive. Assurez-vous d\'avoir au moins deux niveaux de titre dans votre Markdown. (V√©rifiez la console).</p>';
                }
            }
        }
        
        function waitForMarkmap(key) {
            // V√©rifie la disponibilit√© de l'objet Markmap avant de tenter le rendu
            if (typeof window.markmap !== 'undefined' && typeof window.markmap.lib !== 'undefined') {
                const mindmapData = mindmaps[key];
                if (mindmapData) {
                    renderMarkmap(mindmapData.content, mindmapData.title);
                } else {
                    renderMarkmap('# Erreur : Mindmap Introuvable', 'Erreur de Chargement');
                }
            } else {
                // Tente √† nouveau apr√®s un court d√©lai si les scripts ne sont pas encore pr√™ts
                setTimeout(() => waitForMarkmap(key), 50);
            }
        }


        // --- Mod√®le de Donn√©es (Simule le contenu des pages) ---
        const lesson01Overview = "Cette le√ßon introduit les concepts fondamentaux : donn√©e, information, connaissance. Nous d√©couvrons le cycle IPO (Entr√©e ‚Äì Traitement ‚Äì Sortie) et construisons une d√©finition de l'Informatique.";
        const lessonM01S02L02Overview = "Cette s√©quence vous emm√®ne au c≈ìur de la machine. Vous explorerez les composantes essentielles (hardware) qui permettent √† un ordinateur de fonctionner et d'ex√©cuter des programmes, en particulier son sch√©ma fonctionnel.";
        
        const pageContent = {
            accueil: `
                <section class="hero-banner">
                    <h1>Bienvenue dans Aghbalou-info !</h1>
                    <p>Votre espace centralis√© pour apprendre, cr√©er et explorer l'informatique.</p>
                </section>
                <main class="container">
                    <div class="announcement">
                        <strong>‚ö†Ô∏è URGENT :</strong> Le Devoir I (Cycle IPO) est d√ª ce **Vendredi 10 Octobre** ! Rendez-vous dans l'onglet **Devoirs**.
                    </div>
                    <h2 class="section-title">Explore les Modules</h2>
                    
                    <div class="modules-grid">
                        <div class="module-card">
                            <div class="card-header bg-encours">
                                <h3>M01 - G√©n√©ralit√©s sur les Syst√®mes Informatiques</h3>
                                <span class="status-tag status-encours">En cours</span>
                            </div>
                            <div class="card-body">
                                <h4>S√©quence 1 : D√©finitions et vocabulaire de base</h4>
                                <p>Introduction aux concepts cl√©s : Donn√©e, Information, Traitement, IPO, Syst√®me Informatique.</p>
                                <ul>
                                    <li>üìù Le√ßon 1 : Information, traitement et Informatique (Actif)</li>
                                    <li>üîó S√©quence 2 : Structure de base d‚Äôun ordinateur</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <button class="btn" onclick="navigateTo('modules')">Acc√©der aux Le√ßons</button>
                            </div>
                        </div>

                        <div class="module-card">
                            <!-- NOUVEAU GRADIENT : BLEU OC√âAN pour Logiciels -->
                            <div class="card-header bg-logiciels">
                                <h3>M02 - Les Logiciels</h3>
                                <span class="status-tag status-avenir" style="background-color:white; color:#3498db;">√Ä venir</span>
                            </div>
                            <div class="card-body">
                                <h4>S√©quences : Syst√®me d‚Äôexploitation, Traitement de texte, Tableur</h4>
                                <p>Apprenez √† utiliser efficacement votre ordinateur en ma√Ætrisant les logiciels fondamentaux : OS, Word et Excel.</p>
                                <ul>
                                    <li>üîó S√©quence 1 : Syst√®me d‚Äôexploitation</li>
                                    <li>üîó S√©quence 2 : Traitement de texte</li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Voir le Plan Complet</button>
                            </div>
                        </div>
                        
                        <div class="module-card">
                            <!-- GRADIENT VIOLET pour Algorithmique -->
                            <div class="card-header bg-algorithmique">
                                <h3>M03 - Algorithmique et Programmation</h3>
                                <span class="status-tag status-termine" style="background-color:white; color:#9b59b6;">√Ä venir</span>
                            </div>
                            <div class="card-body">
                                <h4>S√©quences : Algorithme et structures de contr√¥le, Langage de programmation</h4>
                                <p>D√©couvrez la logique de la programmation. Apprenez √† concevoir des algorithmes pour r√©soudre des probl√®mes complexes.</p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Voir le Plan Complet</button>
                            </div>
                        </div>

                        <div class="module-card">
                            <!-- NOUVEAU GRADIENT : ORANGE SOLAIRE pour R√©seaux -->
                            <div class="card-header bg-reseaux">
                                <h3>M04 - R√©seaux et Internet</h3>
                            <span class="status-tag" style="background-color:white; color:#f39c12;">√Ä venir</span>
                            </div>
                            <div class="card-body">
                                <h4>S√©quences : Notion de r√©seau informatique, R√©seau Internet</h4>
                                <p>Comprenez comment les machines communiquent : typologie, topologie des r√©seaux et les services essentiels d'Internet.</p>
                            </div>
                            <div class="card-footer">
                                <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Voir le Plan Complet</button>
                            </div>
                        </div>
                    </div>
                </main>
            `,
            modules: `
                <main class="container">
                    <h2 class="section-title">üìö Plan d'√âtudes D√©taill√© : Modules et Le√ßons</h2>
                    <p style="text-align:center; margin-bottom: 30px;">Cliquez sur l'en-t√™te d'un module pour le d√©plier/replier.</p>
                    
                    <!-- Module 1 D√©taill√© : Statut EN COURS (sera d√©pli√© par JS) -->
                    <div class="info-card mb-8" id="module01">
                        <div class="card-header bg-encours" onclick="toggleModule('module01')">
                            <h3>Module 1 : G√©n√©ralit√©s sur les Syst√®mes Informatiques</h3>
                            <div class="header-controls">
                                <span class="status-tag status-encours">En cours</span>
                                <span class="toggle-icon">‚ñº</span>
                            </div>
                        </div>
                        <div class="card-body">
                            
                            <!-- S√©quence 1 -->
                            <div class="sequence-heading">S√©quence 1 : D√©finitions et vocabulaire de base</div>
                            
                            <!-- Le√ßon 1 S1 M1 -->
                            <a href="#" onclick="event.preventDefault(); navigateTo('sequence01')" class="resource-link border-success" style="cursor:pointer;">
                                <span class="icon">üí°</span>
                                <div>
                                    <h4 style="margin:0;">Le√ßon 1 : Information, traitement et Informatique</h4>
                                    <p>Concepts fondamentaux (Donn√©e, Info, Connaissance) et cycle IPO.</p>
                                </div>
                            </a>
                            <!-- Le√ßon 2 S1 M1 -->
                            <a href="#" onclick="event.preventDefault(); navigateTo('sequence01-L2')" class="resource-link" style="cursor:pointer;">
                                <span class="icon">üíª</span>
                                <div>
                                    <h4 style="margin:0;">Le√ßon 2 : Syst√®me informatique, Repr√©sentation de l'information</h4>
                                    <p>Comment l'ordinateur organise les concepts (√Ä venir).</p>
                                </div>
                            </a>

                            <!-- S√©quence 2 -->
                            <div class="sequence-heading">S√©quence 2 : Structure de base d‚Äôun ordinateur</div>
                             <!-- Le√ßon 2 S2 M1 -->
                            <a href="#" onclick="event.preventDefault(); navigateTo('sequence02')" class="resource-link border-success" style="cursor:pointer;">
                                <span class="icon">‚öôÔ∏è</span>
                                <div>
                                    <h4 style="margin:0;">Le√ßon 2 : Sch√©ma fonctionnel d‚Äôun ordinateur</h4>
                                    <p>Les unit√©s Entr√©e-Traitement-Sortie connect√©es (Disponible).</p>
                                </div>
                            </a>
                             <!-- Le√ßon 1 S2 M1 -->
                            <a href="#" onclick="event.preventDefault(); navigateTo('sequence02-L1')" class="resource-link" style="cursor:pointer;">
                                <span class="icon">üñ•Ô∏è</span>
                                <div>
                                    <h4 style="margin:0;">Le√ßon 1 : Ordinateur, Cat√©gories des ordinateurs</h4>
                                    <p>Les diff√©rents types de machines et leurs r√¥les (√Ä venir).</p>
                                </div>
                            </a>
                             <!-- Le√ßon 3 S2 M1 -->
                            <a href="#" onclick="event.preventDefault(); navigateTo('sequence02-L3')" class="resource-link" style="cursor:pointer;">
                                <span class="icon">üß†</span>
                                <div>
                                    <h4 style="margin:0;">Le√ßon 3 : CPU et M√©moire centrale</h4>
                                    <p>Le r√¥le du cerveau de l'ordinateur (√Ä venir).</p>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- Module 2 D√©taill√© : Statut LOGICIELS (Bleu Oc√©an) -->
                    <div class="info-card mb-8 collapsed" id="module02">
                        <div class="card-header bg-logiciels" onclick="toggleModule('module02')">
                            <h3>Module 2 : Les Logiciels</h3>
                             <div class="header-controls">
                                <span class="status-tag" style="background-color:white; color:#3498db;">√Ä venir</span>
                                <span class="toggle-icon">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="sequence-heading">S√©quence 1 : Syst√®me d‚Äôexploitation</div>
                            <p>Le√ßons : Fonctionnalit√©s de base, Environnement d‚Äôun syst√®me, Gestion des fichiers et dossiers.</p>
                            
                            <div class="sequence-heading">S√©quence 2 : Traitement de texte</div>
                            <p>Le√ßons : Interface et outils de base, √âlaboration d‚Äôun document.</p>
                            
                            <div class="sequence-heading">S√©quence 3 : Tableur</div>
                            <p>Le√ßons : Fonctionnalit√©s, Cr√©ation de tableaux, R√©alisation de graphiques.</p>
                        </div>
                    </div>

                    <!-- Module 3 D√©taill√© : Statut ALGORITHMIQUE (Violet Am√©thyste) -->
                    <div class="info-card mb-8 collapsed" id="module03">
                        <div class="card-header bg-algorithmique" onclick="toggleModule('module03')">
                            <h3>Module 3 : Algorithmique et Programmation</h3>
                            <div class="header-controls">
                                <span class="status-tag status-termine">√Ä venir</span>
                                <span class="toggle-icon">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="sequence-heading">S√©quence 1 : Algorithme et structures de contr√¥le</div>
                            <p>Le√ßons : Notion d‚Äôalgorithme, Instructions de base, Structures de contr√¥le.</p>
                            
                            <div class="sequence-heading">S√©quence 2 : Langage de programmation</div>
                            <p>Le√ßons : Notion de programme, Langages de programmation, Transcription d‚Äôun algorithme en code.</p>
                        </div>
                    </div>

                    <!-- Module 4 D√©taill√© : Statut R√âSEAUX (Orange Solaire) -->
                    <div class="info-card mb-8 collapsed" id="module04">
                        <div class="card-header bg-reseaux" onclick="toggleModule('module04')">
                            <h3>Module 4 : R√©seaux et Internet</h3>
                            <div class="header-controls">
                                <span class="status-tag" style="background-color:white; color:#f39c12;">√Ä venir</span>
                                <span class="toggle-icon">‚ñ∂</span>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="sequence-heading">S√©quence 1 : Notion de r√©seau informatique</div>
                            <p>Le√ßons : D√©finition et utilit√©, Typologie des r√©seaux, Topologies des r√©seaux.</p>
                            
                            <div class="sequence-heading">S√©quence 2 : R√©seau Internet</div>
                            <p>Le√ßons : D√©finition d‚ÄôInternet, Services Internet, Avantages et inconv√©nients d‚ÄôInternet.</p>
                        </div>
                    </div>
                </main>
            `,
            // --- PAGE DE S√âQUENCE D√âTAILL√âE (M01-S01-L01) ---
            sequence01: `
                <main class="container">
                    <h2 class="section-title">üìò M01-S01-L01 : Information, Traitement et Informatique</h2>
                    <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">
                        ‚Üê Retour aux Modules
                    </button>

                    <div class="lesson-page-content">
                        <h2>Aper√ßu de la Le√ßon</h2>
                        <p id="lesson01OverviewText">${lesson01Overview}</p>
                        
                        <h3>Objectifs P√©dagogiques</h3>
                        <p>√Ä la fin de cette le√ßon, vous serez capable de :</p>
                        <ul>
                            <li><strong>Distinguer</strong> les notions de donn√©e, information et connaissance.</li>
                            <li><strong>Expliquer</strong> la notion de traitement et le cycle IPO.</li>
                            <li><strong>D√©finir</strong> le terme ¬´ informatique ¬ª dans un contexte technique et simple.</li>
                        </ul>

                        <h3 style="border-bottom-color: var(--status-encours);">Crit√®res de R√©ussite (¬´ Je peux‚Ä¶ ¬ª)</h3>
                        <div class="success-criteria">
                            <ul>
                                <li>Je peux donner un exemple de <strong>donn√©e</strong> et le transformer en <strong>information</strong>.</li>
                                <li>Je peux d√©crire <strong>Entr√©e ‚Äì Traitement ‚Äì Sortie</strong> pour un cas r√©el (ex: un distributeur).</li>
                                <li>Je peux expliquer ce que signifie <strong>automatique</strong> et d√©finir <strong>l‚Äôinformatique</strong> simplement.</li>
                            </ul>
                        </div>

                        <h3>Ressources et Activit√©s</h3>
                        <p>Utilisez ces ressources et r√©alisez les activit√©s suivantes pour ma√Ætriser les objectifs.</p>
                        
                        <h4>1. Travail Pratique : Cycle IPO</h4>
                        <a href="URL_EXERCICE_IPO" target="_blank" class="resource-link border-success">
                            <span class="icon" style="color:var(--status-encours);">üîó</span>
                            <div>
                                <h4 style="margin:0; color:var(--text-dark);">Fiche d'Exercice : Analyser un Syst√®me</h4>
                                <p>Compl√©tez la fiche IPO vierge pour trois syst√®mes diff√©rents (ex : ATM, Thermom√®tre, Feu de circulation).</p>
                            </div>
                        </a>
                        
                        <h4>2. √âvaluation Formative</h4>
                        <button class="btn" style="background-image: var(--gradient-algorithmique); margin-top: 10px;">
                            Lancer le Mini-Quiz (4 Questions)
                        </button>
                        
                        
                        <!-- NOUVELLE SECTION : NOTES EMPIL√âES / TEXTE DE COURS -->
                        <h3 style="border-bottom-color: var(--accent-color); margin-top: 40px;">Notes de Cours D√©taill√©es (Version Web)</h3>
                        <p>Cliquez pour lire le r√©sum√© complet de la s√©quence directement sur cette page.</p>

                        <button class="btn" style="background-image: linear-gradient(135deg, #1abc9c, #3498db); margin-top: 10px;" onclick="toggleNoteContent('notesSequence01')">
                            Afficher les Notes de Cours D√©taill√©es ‚ûï
                        </button>
                        
                        <div id="notesSequence01" class="note-content">
                            <h5>1. D√©finitions Fondamentales</h5>
                            
                            <p>
                                <strong>La Donn√©e :</strong> C'est la mati√®re premi√®re. Un symbole brut, non interpr√©t√© (ex : un nombre "18", le mot "Janvier", une image). La donn√©e n'a pas de sens en soi.
                            </p>
                            
                            <p>
                                <strong>L'Information :</strong> C'est la donn√©e trait√©e, structur√©e et mise en contexte. Elle apporte une signification. Ex: Si nous savons que "18" est la temp√©rature (18&deg;C) d'une pi√®ce, c'est une information.
                            </p>
                            
                            <p>
                                <strong>La Connaissance :</strong> C'est la capacit√© √† utiliser l'information dans une situation donn√©e pour prendre une d√©cision. Ex: Si la temp√©rature est 18&deg;C et que la consigne est 22&deg;C, vous avez la connaissance qu'il faut allumer le chauffage.
                            </p>
                            
                            <h5>2. Le Cycle IPO (Input - Process - Output)</h5>
                            
                            <p>
                                Le <strong>traitement de l'information</strong> suit toujours un cycle en trois √©tapes :
                                <ul>
                                    <li><strong>I - Entr√©e (Input) :</strong> Acquisition des donn√©es brutes (clavier, souris, capteurs).</li>
                                    <li><strong>P - Traitement (Process) :</strong> Manipulation des donn√©es selon des r√®gles ou algorithmes (calculs, tri, mise en forme). C'est le r√¥le du CPU.</li>
                                    <li><strong>O - Sortie (Output) :</strong> Restitution de l'information (√©cran, imprimante, haut-parleurs).</li>
                                </ul>
                                <strong>Exemple :</strong> Taper un mot. Entr√©e (touches clavier) ‚Üí Traitement (affichage des lettres) ‚Üí Sortie (mot sur l'√©cran).
                            </p>
                            
                            <h5>3. D√©finition de l'Informatique</h5>
                            <p>
                                Le terme <strong>Informatique</strong> est la contraction de <strong>Information</strong> et <strong>Automatique</strong>. C'est donc la science du traitement rationnel, notamment √† l'aide de machines (ordinateurs), de l'information consid√©r√©e comme le support des connaissances et des communications. En bref : <strong>Traitement Automatique de l'Information</strong>.
                            </p>
                        </div>


                        <!-- SECTION : LIENS PDF / FICHIERS -->
                        <h3 style="border-bottom-color: var(--danger-color); margin-top: 40px;">Documents √† T√©l√©charger (PDF/Mindmap)</h3>
                        
                        <div class="notes-section">
                            <p>T√©l√©chargez les notes compl√®tes pour l'√©tude et la r√©vision.</p>
                            
                            <!-- 1. Lien vers le Knowledge Organizer (Fiche R√©sum√©) -->
                            <a href="URL_KNOWLEDGE_ORGANIZER_S01.pdf" target="_blank" class="resource-link border-success">
                                <span class="icon" style="color:var(--status-encours);">üìò</span>
                                <div>
                                    <h4 style="margin:0; color:var(--text-dark);">Knowledge Organizer (Fiche R√©sum√©)</h4>
                                    <p>Document essentiel pour la r√©vision rapide et l'auto-√©valuation.</p>
                                </div>
                            </a>
                            
                            <!-- 2. Lien vers la Mindmap (Carte Mentale) - Navigue vers la page Markmap -->
                            <a href="#" onclick="event.preventDefault(); navigateToMarkmap('S01')" class="resource-link border-algorithmique">
                                <span class="icon" style="color:var(--status-termine);">üß†</span>
                                <div>
                                    <h4 style="margin:0; color:var(--text-dark);">Carte Mentale Interactive de la S√©quence</h4>
                                    <p>Visualisation interactive de la le√ßon avec Markmap.</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </main>
            `,
            // --- PAGE DE S√âQUENCE D√âTAILL√âE (M01-S02-L02) ---
            sequence02: `
                <main class="container">
                    <h2 class="section-title">‚öôÔ∏è M01-S02-L02 : Sch√©ma Fonctionnel d‚Äôun Ordinateur</h2>
                    <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">
                        ‚Üê Retour aux Modules
                    </button>

                    <div class="lesson-page-content">
                        <h2>Aper√ßu de la Le√ßon</h2>
                        <p id="lessonM01S02L02OverviewText">${lessonM01S02L02Overview}</p>
                        
                        <h3>Objectifs P√©dagogiques</h3>
                        <ul>
                            <li><strong>Identifier</strong> les unit√©s fonctionnelles de l'architecture de Von Neumann.</li>
                            <li><strong>Expliquer</strong> le r√¥le du CPU, de la RAM et des p√©riph√©riques.</li>
                            <li><strong>D√©crire</strong> le flux d'information (bus de donn√©es, d'adresses et de commandes).</li>
                        </ul>

                        <h3>Ressources et Activit√©s</h3>
                        
                        <!-- 1. Lien vers la Mindmap (Carte Mentale) - Navigue vers la page Markmap -->
                        <a href="#" onclick="event.preventDefault(); navigateToMarkmap('S02')" class="resource-link border-algorithmique">
                            <span class="icon" style="color:var(--status-termine);">üß†</span>
                            <div>
                                <h4 style="margin:0; color:var(--text-dark);">Carte Mentale Interactive de la S√©quence (Sch√©ma Fonctionnel)</h4>
                                <p>Visualisation interactive de la le√ßon avec Markmap.</p>
                            </div>
                        </a>
                        
                        <h4>Vid√©o P√©dagogique (12 minutes)</h4>
                        <a href="https://www.youtube.com/watch?v=AD-3nVI3-_U" target="_blank" class="resource-link border-danger">
                            <span class="icon" style="color: var(--danger-color);">‚ñ∂Ô∏è</span>
                            <div>
                                <h4 style="margin:0; color:var(--text-dark);">Vid√©o : Le Hardware expliqu√© simplement</h4>
                                <p>Regardez avant de lire les notes de cours pour une introduction visuelle.</p>
                            </div>
                        </a>
                        
                        <h4>Notes de cours (PDF)</h4>
                        <a href="URL_PDF_ARCHITECTURE_MATERIELLE" target="_blank" class="resource-link border-success">
                            <span class="icon" style="color: var(--status-encours);">üìÑ</span>
                            <div>
                                <h4 style="margin:0; color:var(--text-dark);">T√©l√©charger les notes compl√®tes</h4>
                                <p>Contient les sch√©mas d√©taill√©s de l'architecture Von Neumann.</p>
                            </div>
                        </a>
                    </div>
                </main>
            `,
            // --- PAGES NON D√âTAILL√âES (Placeholders pour les le√ßons futures) ---
            'sequence01-L2': `
                <main class="container">
                    <h2 class="section-title" style="color: var(--text-dark);">‚è≥ M01-S01-L02 : Syst√®me informatique, Repr√©sentation de l'information</h2>
                    <p style="text-align:center;">Cette le√ßon est en cours de pr√©paration et sera disponible prochainement.</p>
                    <div style="text-align:center; margin-top: 30px;">
                        <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Retour aux Modules</button>
                    </div>
                </main>
            `,
            'sequence02-L1': `
                <main class="container">
                    <h2 class="section-title" style="color: var(--text-dark);">‚è≥ M01-S02-L01 : Ordinateur, Cat√©gories des ordinateurs</h2>
                    <p style="text-align:center;">Cette le√ßon est en cours de pr√©paration et sera disponible prochainement.</p>
                    <div style="text-align:center; margin-top: 30px;">
                        <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Retour aux Modules</button>
                    </div>
                </main>
            `,
            'sequence02-L3': `
                <main class="container">
                    <h2 class="section-title" style="color: var(--text-dark);">‚è≥ M01-S02-L03 : CPU et M√©moire centrale</h2>
                    <p style="text-align:center;">Cette le√ßon est en cours de pr√©paration et sera disponible prochainement.</p>
                    <div style="text-align:center; margin-top: 30px;">
                        <button class="btn btn-secondary" style="background-image:none;" onclick="navigateTo('modules')">Retour aux Modules</button>
                    </div>
                </main>
            `,
            // --- PAGE CALENDRIER (POUR L'EXEMPLE) ---
            calendrier: `
                <main class="container">
                    <h2 class="section-title">üìÖ Calendrier des √âv√©nements</h2>
                    <p style="text-align:center; margin-bottom: 30px;">Toutes les dates importantes : devoirs, examens et sessions de rattrapage.</p>

                    <div style="max-width: 800px; margin: 0 auto;">
                        <div class="event-item urgent">
                            <div class="event-date">10 Oct.<br><span>URGENT</span></div>
                            <div class="event-details">
                                <h4>Soumission Devoir I (Cycle IPO)</h4>
                                <p>Date limite : 23h59. √Ä soumettre via Google Forms.</p>
                            </div>
                        </div>
                        <div class="event-item project">
                            <div class="event-date">15 Oct.<br><span>PROJET</span></div>
                            <div class="event-details">
                                <h4>Lancement du Projet Web</h4>
                                <p>Pr√©sentation des objectifs du Projet M03. D√©but de la phase de planification.</p>
                            </div>
                        </div>
                        <div class="event-item">
                            <div class="event-date">24 Oct.<br><span>EXAMEN</span></div>
                            <div class="event-details">
                                <h4>Examen Sommatif M01</h4>
                                <p>√âvaluation de l'ensemble du Module 1 (Concepts, Architecture).</p>
                            </div>
                        </div>
                    </div>
                </main>
            `,
            // --- PAGE MARKMAP INTERACTIVE (MAIN PAGE) ---
            markmap: `
                <main class="container">
                    <h2 class="section-title" id="markmapTitle">üó∫Ô∏è Carte Mentale Interactive</h2>
                    <button class="btn btn-secondary" style="background-image:none; margin-bottom: 20px;" onclick="navigateTo('modules')">
                        ‚Üê Retour aux Modules
                    </button>

                    <div id="markmap-page-container">
                        <svg id="markmap-svg"></svg>
                    </div>
                </main>
            `,
            devoirs: `
                <main class="container">
                    <h2 class="section-title">üìù Travaux et √âvaluations</h2>
                    <p style="text-align:center; margin-bottom: 30px;">V√©rifiez les instructions et les dates limites. <strong>Tout retard sera p√©nalis√©</strong>.</p>
                    
                    <div class="modules-grid">
                        <div class="info-card">
                             <div class="card-header bg-danger">
                                <h3>Devoir I - Cycle IPO</h3>
                                <span class="status-tag" style="background-color: white; color: var(--danger-color);">‚ö†Ô∏è URGENT</span>
                            </div>
                            <div class="card-body">
                                <p class="font-bold"><strong>Date limite : Vendredi 10 Octobre √† 23h59</strong></p>
                                <p>Analyse et description du cycle IPO d'un syst√®me complexe (ex : un distributeur automatique).</p>
                                <ul class="mt-3" style="list-style: disc; margin-left: 20px;">
                                    <li>Points : 20% de la note finale du module.</li>
                                    <li>Lien de soumission : <a href="URL_GOOGLE_FORMS" target="_blank" style="color:var(--accent-color); font-weight:700;">Soumettre ici</a></li>
                                </ul>
                            </div>
                            <div class="card-footer">
                                <a href="URL_INSTRUCTIONS_PDF" target="_blank" class="btn" style="background-image: var(--gradient-encours);">T√©l√©charger les Instructions</a>
                            </div>
                        </div>

                         <div class="info-card">
                             <div class="card-header bg-logiciels">
                                <h3>Projet Final Web</h3>
                                <span class="status-tag" style="background-color: white; color: #3498db;">Planification</span>
                            </div>
                            <div class="card-body">
                                <p class="font-bold"><strong>D√©but : 15 Octobre</strong></p>
                                <p>Cr√©ation d'un petit site web interactif sur un sujet de votre choix. √âvaluation sur la structure HTML/CSS.</p>
                            </div>
                            <div class="card-footer">
                                <a href="URL_GRILLE_EVALUATION" target="_blank" class="btn btn-secondary" style="background-image:none;">Grille d'√âvaluation</a>
                            </div>
                        </div>
                    </div>
                </main>
            `,
            // --- PAGE RESSOURCES (CORRIG√âE) ---
            ressources: `
                <main class="container">
                    <h2 class="section-title">üîó Outils et Ressources Utiles</h2>
                    <p style="text-align:center; margin-bottom: 30px;">Logiciels, liens de r√©f√©rence et guides pour vous aider √† coder.</p>
                    
                    <div class="ressources-grid">
                        <a href="https://code.visualstudio.com/" target="_blank" class="resource-link" style="border-image: linear-gradient(to bottom, #007ACC, #005A9C) 1;">
                            <span class="icon" style="color:#007ACC;">üßë‚Äçüíª</span>
                            <div>
                                <h4>Visual Studio Code (VS Code)</h4>
                            <p>L'√©diteur de code recommand√© pour tous nos projets.</p>
                            </div>
                        </a>
                        <a href="https://www.python.org/" target="_blank" class="resource-link" style="border-image: linear-gradient(to bottom, #306998, #34495e) 1;">
                            <span class="icon" style="color:#306998;">üêç</span>
                            <div>
                                <h4>Site Officiel Python</h4>
                                <p>T√©l√©chargement et documentation pour le Module 2.</p>
                            </div>
                        </a>
                        <a href="https://validator.w3.org/" target="_blank" class="resource-link" style="border-image: linear-gradient(to bottom, #F39C12, #D4AC0D) 1;">
                            <span class="icon" style="color:#F39C12;">üîç</span>
                            <div>
                                <h4>Validateur HTML/CSS du W3C</h4>
                                <p>V√©rifiez la conformit√© de votre code web.</p>
                            </div>
                        </a>
                        <a href="https://fr.wikipedia.org/wiki/Informatique" target="_blank" class="resource-link" style="border-image: linear-gradient(to bottom, #95A5A6, #7f8c8d) 1;">
                            <span class="icon" style="color:#95A5A6;">üìñ</span>
                            <div>
                                <h4>Ressources th√©oriques g√©n√©rales</h4>
                                <p>Pour approfondir les concepts g√©n√©raux de l'informatique.</p>
                            </div>
                        </a>
                    </div>
                </main>
            `,
            // --- PAGE CONTACT (MISE √Ä JOUR) ---
            contact: `
                <main class="container">
                    <h2 class="section-title">‚úâÔ∏è Contacter l'Enseignant</h2>
                    <div style="max-width: 600px; margin: 0 auto;" class="info-card">
                        <div class="card-body">
                            <h4 style="color: var(--text-dark); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; margin-bottom: 20px;">Informations de Contact</h4>
                            
                            <!-- Email -->
                            <a href="mailto:younes.tichoua@taalim.ma" class="resource-link" style="border-image: linear-gradient(to bottom, var(--accent-color), #2980b9) 1;">
                                <span class="icon" style="color:var(--accent-color);">üìß</span>
                                <div>
                                    <h4>Email Professionnel</h4>
                                    <p>younes.tichoua@taalim.ma </p>
                                </div>
                            </a>

                            <!-- Bureau -->
                            <div class="resource-link border-success">
                                <span class="icon" style="color:var(--status-encours);">üìç</span>
                                <div>
                                    <h4>Disponibilit√© au Bureau</h4>
                                    <p>Salle <strong>06</strong> - Les <strong>Mercredis apr√®s-midi</strong> de 14h √† 18h.</p>
                                </div>
                            </div>

                            <!-- Support -->
                            <div class="resource-link border-algorithmique">
                                <span class="icon" style="color:var(--status-termine);">üí¨</span>
                                <div>
                                    <h4>Questions G√©n√©rales</h4>
                                    <p>Utilisez le canal de support de votre classe (Slack/Teams).</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            `
        };


        // --- Fonction de Navigation vers la carte mentale ---
        function navigateToMarkmap(key) {
            currentMindmapKey = key; 
            navigateTo('markmap'); 
        }
        
        // --- Fonction de Navigation G√©n√©rique ---
        function navigateTo(pageName) {
            const contentDiv = document.getElementById('content');
            
            // 1. Charger le contenu
            if (pageContent[pageName]) {
                contentDiv.innerHTML = pageContent[pageName];
            } else {
                console.error("Page non trouv√©e pour la cl√©:", pageName);
                contentDiv.innerHTML = `
                    <main class="container">
                        <h2 class="section-title" style="color: var(--danger-color);">Page Non Trouv√©e (404)</h2>
                        <p style="text-align:center;">D√©sol√©, la page demand√©e n'existe pas ou n'a pas encore √©t√© cr√©√©e.</p>
                        <div style="text-align:center; margin-top: 30px;">
                            <button class="btn" onclick="navigateTo('accueil')">Retour √† l'Accueil</button>
                        </div>
                    </main>
                `;
            }

            // 2. Mettre √† jour le lien actif dans la barre de navigation
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            let activePage = pageName;
            if (pageName.startsWith('sequence') || pageName === 'markmap') {
                activePage = 'modules'; 
            }
            
            const activeLink = document.querySelector(`.nav-link[data-page="${activePage}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }

            // 3. Action sp√©cifique pour la page Modules (Gestion de l'Accord√©on DYNAMIQUE)
            if (pageName === 'modules') {
                setTimeout(() => {
                    const moduleCards = document.querySelectorAll('.info-card');
                    
                    moduleCards.forEach(card => {
                        const statusTag = card.querySelector('.status-tag');
                        
                        // D√©termine si le module doit √™tre d√©pli√©
                        const shouldBeActive = statusTag && (
                            statusTag.textContent.toLowerCase().includes('actif') || 
                            statusTag.textContent.toLowerCase().includes('en cours')
                        );
                        
                        const icon = card.querySelector('.toggle-icon');

                        if (shouldBeActive) {
                            // C'est le module actif, il doit √™tre d√©pli√©
                            card.classList.remove('collapsed');
                            if (icon) icon.innerHTML = '‚ñº';
                        } else {
                            // Les autres modules sont repli√©s
                            card.classList.add('collapsed');
                            if (icon) icon.innerHTML = '‚ñ∂';
                        }
                    });
                }, 50); // Petit d√©lai pour laisser le DOM se charger apr√®s l'injection
            }


            // 4. Action sp√©cifique pour Markmap (appel asynchrone s√©curis√©)
            if (pageName === 'markmap') {
                setTimeout(() => {
                    waitForMarkmap(currentMindmapKey);
                }, 100); 
            }

            // 5. D√©filement vers le haut
            window.scrollTo(0, 0);
        }

        // --- Mise en place de la navigation √† l'initialisation ---
        function setupNavigation() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const page = link.getAttribute('data-page');
                    navigateTo(page);
                });
            });

            // Charger la page d'accueil au chargement initial
            navigateTo('accueil');
        }

        // D√©marrer l'application une fois que le DOM est compl√®tement charg√©
        window.onload = setupNavigation;
    </script>
</body>
</html>
